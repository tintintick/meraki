{% comment %} 
 earlyTime:最早到达时间，
endTime:最晚到达时间 
{% endcomment %}
<style>
  .delivery-time {
    font-family: 'Kanit', sans-serif;
    font-size: 1.2rem;
    font-weight: 300;
    line-height: 1.3;
    color: #525252;
    display: flex;
    align-items: center;
    text-align: left;
    gap: 0.8rem;
  }
  .delivery-time-date {
    font-weight: 400;
  }

  .sticky-bar__left-text-wrapper {
    display: block;
    border-left: 1px solid #212121;
    padding-left: 0.8rem;
    text-align: left;
    color: #e6e6e6;
  }

  .sticky-bar__left-text {
    display: block;
    color: #838383;
  }
  @media (max-width: 768px) {
    .sticky-bar__left-text {
      display: inline;
    }
  }

  .product__info-container .delivery-time {
    font-size: 1.6rem;
  }
  .product__info-container .sticky-bar__left-text-wrapper {
    color: #525252;
  }
  .product__info-container .sticky-bar__left-text {
    color: #525252;
  }

  #delivery-date-range-{{ section.id }} {
    display: block;
  }
  @media (max-width: 768px) {
    #delivery-date-range-{{ section.id }} {
      display: inline;
    }
  }
</style>

<div class="delivery-time">
  {% render 'icon-truck' %}
  <div class="sticky-bar__left-text-wrapper">
    <div class="sticky-bar__left-text">Order today, delivers:</div>
    <span id="delivery-date-range-{{ section.id }}"></span>
  </div>
</div>

<script>
  (() => {
    function formatDate(date) {
      const d = date.getDate().toString().padStart(2, '0');
      const m = (date.getMonth() + 1).toString().padStart(2, '0');
      const y = date.getFullYear();
      return `${d}/${m}/${y}`;
    }

    const now = new Date();
    const start = new Date(now);
    {% comment %} {{- earlyTime  -}} {% endcomment %}
    start.setDate(now.getDate() + {{- earlyTime  -}}   );

    const end = new Date(now);
    {% comment %} end.setDate(now.getDate() + {{- endTime -}}); {% endcomment %}
     end.setDate(now.getDate()+ {{- endTime  -}} );

    const range = `${formatDate(start)} - ${formatDate(end)}`;
    const el = document.getElementById('delivery-date-range-{{ section.id }}');
    if (el) el.textContent = range;
  })();
</script>
